/*! Backbone.EventStreams - v0.1.0 - 2013-01-31
* https://github.com/pyykkis/Backbone.EventStreams
* Copyright (c) 2013 Jarno Keskikangas <jarno.keskikangas@leonidasoy.fi>; Licensed MIT */
(function(){var e=[].slice;Backbone.EventStream={listenToEventStream:function(t,n,r){var i;return r==null&&(r=_.identity),i=this,new Bacon.EventStream(function(s){var o,u;return o=function(){var t,n;t=1<=arguments.length?e.call(arguments,0):[],n=s(new Bacon.Next(r.apply(null,t)));if(n===Bacon.noMore)return u()},u=function(){return i.stopListening(t,n,o)},i.listenTo(t,n,o),u})},asEventStream:function(t,n){var r;return n==null&&(n=_.identity),r=this,new Bacon.EventStream(function(i){var s,o;return s=function(){var t,r;t=1<=arguments.length?e.call(arguments,0):[],r=i(new Bacon.Next(n.apply(null,t)));if(r===Bacon.noMore)return o()},o=function(){return r.off(t,s)},r.on(t,s,this),o})}},_.extend(Backbone,Backbone.EventStream),_.extend(Backbone.Model.prototype,Backbone.EventStream),_.extend(Backbone.Collection.prototype,Backbone.EventStream),_.extend(Backbone.Router.prototype,Backbone.EventStream),_.extend(Backbone.History.prototype,Backbone.EventStream),_.extend(Backbone.View.prototype,Backbone.EventStream)}).call(this);